<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade Calculator</title>
    <link rel="stylesheet" href="static/styles.css">
    <script src="https://pyscript.net/latest/pyscript.js"></script>
    <script>
        function calculateGrades(prelim) {
            const prelimWeight = 0.2;
            const midtermWeight = 0.3;
            const finalWeight = 0.5;
            const passingGrade = 75;
            const deansListGrade = 90;

            const requiredMidterm = (passingGrade - (prelim * prelimWeight)) / (midtermWeight + finalWeight);
            const requiredFinal = (passingGrade - (prelim * prelimWeight) - (requiredMidterm * midtermWeight)) / finalWeight;

            const canPass = 0 <= requiredMidterm && requiredMidterm <= 100 && 0 <= requiredFinal && requiredFinal <= 100;
            const deansMidterm = (deansListGrade - (prelim * prelimWeight)) / (midtermWeight + finalWeight);
            const deansFinal = (deansListGrade - (prelim * prelimWeight) - (deansMidterm * midtermWeight)) / finalWeight;
            const deansListPossible = deansMidterm <= 100 && deansFinal <= 100;

            return {
                prelim,
                requiredMidterm: requiredMidterm.toFixed(2),
                requiredFinal: requiredFinal.toFixed(2),
                canPass,
                deansMidterm: deansMidterm.toFixed(2),
                deansFinal: deansFinal.toFixed(2),
                deansListPossible
            };
        }

        function handleSubmit(event) {
            event.preventDefault();

            const prelimInput = document.getElementById("prelim").value;
            const prelimGrade = parseFloat(prelimInput);
            const results = calculateGrades(prelimGrade);

            let resultMessage = `<h2>Results</h2>
                <p>Prelim Grade: ${results.prelim}</p>
                <p>Required Midterm Grade: ${results.requiredMidterm}</p>
                <p>Required Final Grade: ${results.requiredFinal}</p>
                <p>${results.canPass ? 'You have a chance to pass!' : 'It is difficult to pass.'}</p>
                <h3>Dean's Lister Status</h3>
                <p>${results.deansListPossible ? "It's possible for you to be a Dean's Lister!" : "Unfortunately, it's not possible for you to be a Dean's Lister."}</p>
                <p>Required Midterm Grade: ${results.deansListPossible ? results.deansMidterm : 'N/A'}</p>
                <p>Required Final Grade: ${results.deansListPossible ? results.deansFinal : 'N/A'}</p>`;

            document.getElementById("result-message").innerHTML = resultMessage;
            document.getElementById("error-message").innerHTML = "";
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Grade Calculator</h1>
        
        <form id="grade-form" onsubmit="handleSubmit(event)">
            <label for="prelim">Enter Prelim Grade (0-100):</label>
            <input type="number" id="prelim" name="prelim" min="0" max="100" step="0.01" required>
            <button type="submit">Calculate</button>
        </form>
        
        <div id="error-message"></div>
        <div id="result-message"></div>
    </div>
</body>
</html>
